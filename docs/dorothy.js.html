<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <title>JSDoc: Source: dorothy.js</title>

    <script src="scripts/prettify/prettify.js"> </script>
    <script src="scripts/prettify/lang-css.js"> </script>
    <!--[if lt IE 9]>
      <script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->
    <link type="text/css" rel="stylesheet" href="styles/prettify-tomorrow.css">
    <link type="text/css" rel="stylesheet" href="styles/jsdoc-default.css">
</head>

<body>

<div id="main">

    <h1 class="page-title">Source: dorothy.js</h1>

    



    
    <section>
        <article>
            <pre class="prettyprint source linenums"><code>(function () {
	'use strict';

	/**
	 * Blog data
	 * @type {BlogData}
	 */
	var _data = null;

	/**
	 * Blog view switches
	 * @type {Object.&lt;string, boolean>}
	 */
	var _view = {
		ALL: true,
		ITEM: false,
		POST: false,
		PAGE: false,
		FEED: false,
		HOME: false,
		QUERY: false,
		LABEL: false,
		ERROR: false,
		MOBILE: false,
		SEARCH: false,
		ARCHIVE: false
	};

	/**
	 * Items to be evaluated after window load complete
	 * @type {DorothyItem[]}
	 */
	var _queue = [];

	/**
	 * Evaluation of `DorothyItem` that could be executed
	 * @param {DorothyItem} item
	 */
	function _exec(item) {
		var isRunnable = false;
		var pageTypesArr = item.pageTypes.split('|');

		pageTypesArr.forEach(function (pageType) {
			isRunnable = isRunnable || _view[pageType];
		});

		if (isRunnable &amp;&amp; item.applyMobile || !_view.MOBILE) {
			item.callbackFn(_data);
		}
	}

	/**
	 * Converts `dorothy` arguments to a `DorothyItem`
	 * @param {!string} pageTypes
	 * @param {!DorothyCallback} callbackFn
	 * @param {boolean} [applyMobile=true]
	 * @throws Throws an error if provided params contains not corresponding types
	 * @returns {DorothyItem}
	 */
	function _pack(pageTypes, callbackFn, applyMobile) {
		if (typeof pageTypes !== 'string') {
			throw new Error('First param needs to be a `string`');
		}

		if (typeof callbackFn !== 'function') {
			throw new Error('Second param needs to be a `function`');
		}

		if (applyMobile &amp;&amp; typeof applyMobile !== 'boolean') {
			throw new Error('Third param needs to be a `boolean`');
		}

		return {
			pageTypes: pageTypes,
			callbackFn: callbackFn,
			applyMobile: applyMobile
		};
	}

	/**
	 * @alias dorothy
	 * @param {!string} pageTypes - Pipe-delimited page types
	 * @param {!DorothyCallback} callbackFn - Routine to execute
	 * @param {boolean} [applyMobile=true] - Flag to enable or disable running on mobile requests
	 * @throws Throws an error if provided params contains not corresponding types
	 * @example
	 * // Available page types:
	 * // ALL, ITEM, POST, PAGE, FEED, HOME,
	 * // QUERY, LABEL, ERROR, SEARCH, ARCHIVE
	 *
	 * // Single page-type condition
	 * dorothy('HOME', function (data) {
	 *   alert('Welcome to ' + data.blog.title + '!');
	 * });
	 *
	 * // Multiple page-type conditions
	 * dorothy('POST|PAGE', function (data) {
	 *   alert('You are reading: "' + data.view.title + '".');
	 * }, false);
	 */
	function _dorothy(pageTypes, callbackFn, applyMobile) {
		var item = _pack(pageTypes, callbackFn, applyMobile);

		if (_data !== null) {
			_exec(item);
		} else {
			_queue.push(item);
		}
	}

	window.dorothy = _dorothy;

	window.addEventListener('load', function () {
		_data = this._WidgetManager._GetAllData();

		_view.SEARCH = _data.view.isSearch || false;
		_view.ITEM = _data.view.isSingleItem;
		_view.POST = _data.view.isPost;
		_view.PAGE = _data.view.isPage;
		_view.FEED = _data.view.isMultipleItems;
		_view.HOME = _data.view.isHomepage;
		_view.QUERY = _view.SEARCH &amp;&amp; !!_data.view.search.query;
		_view.LABEL = _data.view.isLabelSearch;
		_view.ERROR = _data.view.isError;
		_view.MOBILE = _data.blog.isMobileRequest;
		_view.ARCHIVE = _data.view.isArchive;

		_queue.forEach(_exec);
	});
}());

/**
 * Blog data from Blogger API
 * @typedef BlogData
 * @todo Search for complete documentation of `_WidgetManager.GetAllData()`
 */

/**
 * @typedef DorothyItem
 * @property {string} pageTypes
 * @property {DorothyCallback} callbackFn
 * @property {boolean} applyMobile
 */

/**
 * @callback DorothyCallback
 * @param {BlogData} data
 */</code></pre>
        </article>
    </section>




</div>

<nav>
    <h2><a href="index.html">Home</a></h2><h3>Global</h3><ul><li><a href="global.html#dorothy">dorothy</a></li></ul>
</nav>

<br class="clear">

<footer>
    Documentation generated by <a href="https://github.com/jsdoc3/jsdoc">JSDoc 3.5.5</a> on Tue Apr 30 2019 23:16:51 GMT-0500 (GMT-05:00)
</footer>

<script> prettyPrint(); </script>
<script src="scripts/linenumber.js"> </script>
</body>
</html>
